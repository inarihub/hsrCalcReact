"use strict";(self.webpackChunkcalculator=self.webpackChunkcalculator||[]).push([[961],{961:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v,getDefaultCharStats:()=>h});var r=t(893),n=t(294);var s=function(e){for(var a=[],t=0,n=["Damage","Crit.Dmg","Avg.Dmg"];t<n.length;t++){var s=n[t];a.push((0,r.jsxs)("div",{className:"BHYZdv6n",children:[(0,r.jsx)("text",{className:"wg5y91ca",children:s}),(0,r.jsx)("text",{className:"jEh6KE4N",children:e.result})]}))}return(0,r.jsx)("div",{className:"A3Hfsa7r",children:a})};var c={multiplier:"Dmg multiplier",hp:"Total HP",def:"Total Def",atk:"Total Atk",crrate:"Crit. rate%",crdmg:"Crit.DMG%",baseatk:"Base Atk",basehp:"Base HP",basedef:"Base Def",flatatk:"Flat Atk",flathp:"Flat HP",flatdef:"Flat Def",atkIncrease:"Atk%",hpIncrease:"HP%",defIncrease:"Def%",dmgIncrease:"Dmg%",defIgnore:"Def Ignore",resPen:"Res Pen"},l={lvl:"Level",res:"Res%",defReduction:"Def reduction%",resReduction:"Res reduction%",dmgTakenIncrease:"More DMG taken%",brokenMultiplier:"Is broken"},u=(0,n.memo)((function(e){var a="percent"===e.type,t=(0,n.useRef)(null);(0,n.useEffect)((function(){var r=Number.isNaN(e.value)?0:e.value;t.current.value=a?(100*r).toFixed(1):r.toString()}));var s,u=function(e){return-1!==Object.keys(c).indexOf(e)}(s=e.statType)?c[s]:l[s],i=a?(0,r.jsx)("text",{style:{margin:0},children:"%"}):(0,r.jsx)(n.Fragment,{}),f=a?void 0:{width:"8em"};return(0,r.jsxs)("div",{className:"GmOFNj5O",children:[(0,r.jsx)("text",{children:u}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{ref:t,className:"Xkfy_Axq",style:f,onFocus:function(e){return e.currentTarget.select()},onChange:function(t){var r;e.max&&Number(t.currentTarget.value)>e.max&&(t.currentTarget.value=e.max.toString()),t.currentTarget.value.length>9&&(t.currentTarget.value=t.currentTarget.value.substring(0,9));var n=null!==(r=Number(t.currentTarget.value))&&void 0!==r?r:0;e.changeCallback(e.statType,a?n/100:n)},type:"number",defaultValue:0,placeholder:"0"}),i]})]})}),(function(e,a){return e.statType===a.statType})),i=function(){return i=Object.assign||function(e){for(var a,t=1,r=arguments.length;t<r;t++)for(var n in a=arguments[t])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e},i.apply(this,arguments)},f=function(e){var a=["atk","hp","def"],t=(0,n.useState)(e.char.srcStat),s=t[0],c=t[1],l=(0,n.useState)(e.char.stats),f=l[0],o=l[1],d=function(e,a){o((function(t){var r=i({},t);return r[e]=a,r}))},p=function(e){switch(e){case"hp":return{percent:"hpIncrease",base:"basehp",flat:"flathp"};case"atk":return{percent:"atkIncrease",base:"baseatk",flat:"flatatk"};case"def":return{percent:"defIncrease",base:"basedef",flat:"flatdef"}}}(s);return(0,n.useEffect)((function(){e.onCharChanged({srcStat:s,stats:f})})),(0,r.jsxs)("div",{className:"Fw3CYGUT",children:[(0,r.jsxs)("section",{className:"YasIwRBF",children:[(0,r.jsx)("text",{name:"sourceStat",children:"Dmg source:"}),(0,r.jsxs)("select",{name:"sourceStat",onChange:function(e){c((function(){return e.currentTarget.value}))},children:[(0,r.jsx)("option",{value:a[0],children:"Atk"}),(0,r.jsx)("option",{value:a[1],children:"HP"}),(0,r.jsx)("option",{value:a[2],children:"Def"})]})]}),(0,r.jsx)(u,{value:f[p.base],statType:p.base,changeCallback:d}),(0,r.jsx)(u,{value:f[p.percent],statType:p.percent,type:"percent",changeCallback:d}),(0,r.jsx)(u,{value:f[p.flat],statType:p.flat,changeCallback:d}),(0,r.jsx)(u,{value:f.multiplier,statType:"multiplier",type:"percent",changeCallback:d}),(0,r.jsx)(u,{value:f.dmgIncrease,statType:"dmgIncrease",type:"percent",changeCallback:d}),(0,r.jsx)(u,{value:f.defIgnore,statType:"defIgnore",type:"percent",changeCallback:d}),(0,r.jsx)(u,{value:f.resPen,statType:"resPen",type:"percent",changeCallback:d})]})};var o=function(){return o=Object.assign||function(e){for(var a,t=1,r=arguments.length;t<r;t++)for(var n in a=arguments[t])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e},o.apply(this,arguments)},d=function(e){var a=(0,n.useState)(e.enemy),t=a[0],s=a[1],c=function(e,a){s((function(t){var r=o({},t);return r[e]=a,r}))};return(0,n.useEffect)((function(){e.onEnemyChanged(t)})),(0,r.jsxs)("div",{className:"pv_lrO39",children:[(0,r.jsx)(u,{value:t.lvl,statType:"lvl",changeCallback:c}),(0,r.jsx)(u,{value:t.res,statType:"res",type:"percent",changeCallback:c}),(0,r.jsx)(u,{value:t.defReduction,statType:"defReduction",type:"percent",changeCallback:c}),(0,r.jsx)(u,{value:t.resReduction,statType:"resReduction",type:"percent",changeCallback:c}),(0,r.jsx)(u,{value:t.dmgTakenIncrease,statType:"dmgTakenIncrease",type:"percent",changeCallback:c})]})},p=function(e,a){var t=e.stats,r=e.srcStat;if(null===t)return 0;var n=(t["base".concat(r)]*(1+t["".concat(r,"Increase")])+t["flat".concat(r)])*t.multiplier,s=1+t.dmgIncrease,c=(200+10*a.lvl)*(1-(a.defReduction+t.defIgnore));c<0&&(c=0);var l=1-c/(c+200+800),u=a.res-a.resReduction-t.resPen;u<-1&&(u=-1);var i=1-u,f=1+a.dmgTakenIncrease;return Math.floor(n*s*l*i*f)};function h(){return{multiplier:0,hp:0,def:0,atk:0,crrate:.05,crdmg:.5,baseatk:0,basehp:0,basedef:0,flatatk:0,flathp:0,flatdef:0,atkIncrease:0,hpIncrease:0,defIncrease:0,dmgIncrease:0,defIgnore:0,resPen:0}}const v=function(){var e=(0,n.useState)({srcStat:"atk",stats:{multiplier:0,hp:0,def:0,atk:0,crrate:.05,crdmg:.5,baseatk:0,basehp:0,basedef:0,flatatk:0,flathp:0,flatdef:0,atkIncrease:0,hpIncrease:0,defIncrease:0,dmgIncrease:0,defIgnore:0,resPen:0}}),a=e[0],t=e[1],c=(0,n.useState)({lvl:95,res:0,defReduction:0,resReduction:0,dmgTakenIncrease:0,brokenMultiplier:1}),l=c[0],u=c[1],i=(0,n.useState)(0),o=i[0],h=i[1];return(0,r.jsxs)("div",{className:"ehmjDA89",children:[(0,r.jsx)("div",{className:"M7oNQ_j_",children:(0,r.jsx)(f,{char:a,onCharChanged:function(e){t((function(){return e})),h((function(){return p(a,l)}))}})}),(0,r.jsx)("div",{className:"sYHpVZRI",children:(0,r.jsx)(d,{enemy:l,onEnemyChanged:function(e){u((function(){return e})),h(p(a,l))}})}),(0,r.jsx)("div",{className:"Bqv6jJHK",children:(0,r.jsx)(s,{result:o})})]})}}}]);
//# sourceMappingURL=961.73acdf974c7c0301bb0c.js.map